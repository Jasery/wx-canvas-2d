"use strict";function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}module.exports={name:"Text",handler:function(){var c=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e,t){var n=_objectSpread(_objectSpread({x:0,y:0,color:"#000",fontSize:12,fontWeight:"",width:1/0,baseline:"top",align:"left"},i),{},{text:String(i.text)||"",ellipsis:Math.max(+i.ellipsis,0),lineHeight:i.lineHeight||i.fontSize||12}),r=0,o=0,l=[];c.ctx.textAlign=n.align,c.ctx.textBaseline=n.baseline,c.ctx.fillStyle=n.color,c.ctx.font="".concat(n.fontWeight," ").concat(c.xDpr(n.fontSize),"px ").concat(c.fontFamily),n.text.split("").forEach(function(e,t){var i=n.text.slice(r,t+1);c.ctx.measureText(i).width<c.xDpr(n.width)?l[o]=i:(r=t,o++)}),n.ellipsis&&l.length>n.ellipsis&&((l=l.slice(0,n.ellipsis))[n.ellipsis-1]=l[n.ellipsis-1].slice(0,-1)+"..."),l.forEach(function(e,t){var i={left:n.x,start:n.x,right:n.x+n.width,end:n.x+n.width,center:n.x+n.width/2}[n.align]||n.x,r=n.y+n.lineHeight*t+(n.lineHeight-n.fontSize)/2;c.ctx.fillText(e,c.xDpr(i),c.xDpr(r))}),e()})}};